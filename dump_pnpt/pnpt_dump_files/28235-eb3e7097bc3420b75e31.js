"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[28235],{33329:(e,t,i)=>{var n=i(71544),r=i(62202),a=i(79582),s={addRefinement:function(e,t,i){if(s.isRefined(e,t,i))return e;var r=""+i,a=e[t]?e[t].concat(r):[r],c={};return c[t]=a,n({},c,e)},removeRefinement:function(e,t,i){if(void 0===i)return s.clearRefinement(e,(function(e,i){return t===i}));var n=""+i;return s.clearRefinement(e,(function(e,i){return t===i&&n===e}))},toggleRefinement:function(e,t,i){if(void 0===i)throw new Error("toggleRefinement should be used with a value");return s.isRefined(e,t,i)?s.removeRefinement(e,t,i):s.addRefinement(e,t,i)},clearRefinement:function(e,t,i){if(void 0===t)return a(e)?{}:e;if("string"==typeof t)return r(e,[t]);if("function"==typeof t){var n=!1,s=Object.keys(e).reduce((function(r,a){var s=e[a]||[],c=s.filter((function(e){return!t(e,a,i)}));return c.length!==s.length&&(n=!0),r[a]=c,r}),{});return n?s:e}},isRefined:function(e,t,i){var n=!!e[t]&&e[t].length>0;if(void 0===i||!n)return n;var r=""+i;return-1!==e[t].indexOf(r)}};e.exports=s},27607:(e,t,i)=>{var n=i(31853),r=i(71544),a=i(29878),s=i(13591),c=i(52641),u=i(62202),f=i(79582),h=i(47671),o=i(33329);function m(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,i){return m(t[i],e)})):e===t}function d(e){var t=e?d._parseNumbers(e):{};void 0===t.userToken||h(t.userToken)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var i=this;Object.keys(t).forEach((function(e){var n=-1!==d.PARAMETERS.indexOf(e),r=void 0!==t[e];!n&&r&&(i[e]=t[e])}))}d.PARAMETERS=Object.keys(new d),d._parseNumbers=function(e){if(e instanceof d)return e;var t={};if(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach((function(i){var n=e[i];if("string"==typeof n){var r=parseFloat(n);t[i]=isNaN(r)?n:r}})),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map((function(e){return Array.isArray(e)?e.map((function(e){return parseFloat(e)})):e}))),e.numericRefinements){var i={};Object.keys(e.numericRefinements).forEach((function(t){var n=e.numericRefinements[t]||{};i[t]={},Object.keys(n).forEach((function(e){var r=n[e].map((function(e){return Array.isArray(e)?e.map((function(e){return"string"==typeof e?parseFloat(e):e})):"string"==typeof e?parseFloat(e):e}));i[t][e]=r}))})),t.numericRefinements=i}return n({},e,t)},d.make=function(e){var t=new d(e);return(e.hierarchicalFacets||[]).forEach((function(e){if(e.rootPath){var i=t.getHierarchicalRefinement(e.name);i.length>0&&0!==i[0].indexOf(e.rootPath)&&(t=t.clearRefinements(e.name)),0===(i=t.getHierarchicalRefinement(e.name)).length&&(t=t.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}})),t},d.validate=function(e,t){var i=t||{};return e.tagFilters&&i.tagRefinements&&i.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&i.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&i.numericRefinements&&f(i.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):f(e.numericRefinements)&&i.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},d.prototype={constructor:d,clearRefinements:function(e){var t={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:o.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:o.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:o.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:o.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return t.numericRefinements===this.numericRefinements&&t.facetsRefinements===this.facetsRefinements&&t.facetsExcludes===this.facetsExcludes&&t.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&t.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(t)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,i){var r=c(i);if(this.isNumericRefined(e,t,r))return this;var a=n({},this.numericRefinements);return a[e]=n({},a[e]),a[e][t]?(a[e][t]=a[e][t].slice(),a[e][t].push(r)):a[e][t]=[r],this.setQueryParameters({numericRefinements:a})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(e,t,i){return void 0!==i?this.isNumericRefined(e,t,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(n,r){return r===e&&n.op===t&&m(n.val,c(i))}))}):this:void 0!==t?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(i,n){return n===e&&i.op===t}))}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(t,i){return i===e}))}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(e){if(void 0===e)return f(this.numericRefinements)?{}:this.numericRefinements;if("string"==typeof e)return u(this.numericRefinements,[e]);if("function"==typeof e){var t=!1,i=this.numericRefinements,n=Object.keys(i).reduce((function(n,r){var a=i[r],s={};return a=a||{},Object.keys(a).forEach((function(i){var n=a[i]||[],c=[];n.forEach((function(t){e({val:t,op:i},r,"numeric")||c.push(t)})),c.length!==n.length&&(t=!0),s[i]=c})),n[r]=s,n}),{});return t?n:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return o.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:o.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return o.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:o.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return o.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:o.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter((function(t){return t!==e}))}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter((function(t){return t!==e}))}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter((function(t){return t.name!==e}))}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return o.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:o.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return o.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:o.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return o.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:o.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.filter((function(t){return t!==e}))};return this.setQueryParameters(t)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:o.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:o.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:o.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var i=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={};return void 0!==this.hierarchicalFacetsRefinements[e]&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+i))?-1===t.indexOf(i)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(i))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:r({},n,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var i={};return i[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:r({},i,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:r({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&o.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&o.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&o.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))return!1;var i=this.getHierarchicalRefinement(e);return t?-1!==i.indexOf(t):i.length>0},isNumericRefined:function(e,t,i){if(void 0===i&&void 0===t)return!!this.numericRefinements[e];var n=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t];if(void 0===i||!n)return n;var r,a,u=c(i),f=void 0!==(r=this.numericRefinements[e][t],a=u,s(r,(function(e){return m(e,a)})));return n&&f},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var e=this,t=a(Object.keys(this.numericRefinements).filter((function(t){return Object.keys(e.numericRefinements[t]).length>0})),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter((function(t){return e.disjunctiveFacetsRefinements[t].length>0})).concat(t).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){var e=this;return a(this.hierarchicalFacets.map((function(e){return e.name})),Object.keys(this.hierarchicalFacetsRefinements).filter((function(t){return e.hierarchicalFacetsRefinements[t].length>0})))},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter((function(t){return-1===e.indexOf(t)}))},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,t={},i=this;return Object.keys(this).forEach((function(n){var r=i[n];-1===e.indexOf(n)&&void 0!==r&&(t[n]=r)})),t},setQueryParameter:function(e,t){if(this[e]===t)return this;var i={};return i[e]=t,this.setQueryParameters(i)},setQueryParameters:function(e){if(!e)return this;var t=d.validate(this,e);if(t)throw t;var i=this,n=d._parseNumbers(e),r=Object.keys(this).reduce((function(e,t){return e[t]=i[t],e}),{}),a=Object.keys(n).reduce((function(e,t){var i=void 0!==e[t],r=void 0!==n[t];return i&&!r?u(e,[t]):(r&&(e[t]=n[t]),e)}),r);return new this.constructor(a)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return s(this.hierarchicalFacets,(function(t){return t.name===e}))},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var i=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e));return t.split(i).map((function(e){return e.trim()}))},toString:function(){return JSON.stringify(this,null,2)}},e.exports=d},97135:(e,t,i)=>{e.exports=function(e){return function(t,i){var s=e.hierarchicalFacets[i],f=e.hierarchicalFacetsRefinements[s.name]&&e.hierarchicalFacetsRefinements[s.name][0]||"",h=e._getHierarchicalFacetSeparator(s),o=e._getHierarchicalRootPath(s),m=e._getHierarchicalShowParentLevel(s),d=a(e._getHierarchicalFacetSortBy(s)),l=t.every((function(e){return e.exhaustive})),v=function(e,t,i,a,s){return function(f,h,o){var m=f;if(o>0){var d=0;for(m=f;d<o;){var l=m&&Array.isArray(m.data)?m.data:[];m=r(l,(function(e){return e.isRefined})),d++}}if(m){var v=Object.keys(h.data).map((function(e){return[e,h.data[e]]})).filter((function(e){return function(e,t,i,n,r,a){return(!r||0===e.indexOf(r)&&r!==e)&&(!r&&-1===e.indexOf(n)||r&&e.split(n).length-r.split(n).length==1||-1===e.indexOf(n)&&-1===i.indexOf(n)||0===i.indexOf(e)||0===e.indexOf(t+n)&&(a||0===e.indexOf(i)))}(e[0],m.path||i,s,t,i,a)}));m.data=n(v.map((function(e){var i=e[0];return function(e,t,i,n,r){var a=t.split(i);return{name:a[a.length-1].trim(),path:t,escapedValue:c(t),count:e,isRefined:n===t||0===n.indexOf(t+i),exhaustive:r,data:null}}(e[1],i,t,u(s),h.exhaustive)})),e[0],e[1])}return f}}(d,h,o,m,f),R=t;return o&&(R=t.slice(o.split(h).length)),R.reduce(v,{name:e.hierarchicalFacets[i].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:l,data:null})}};var n=i(24652),r=i(13591),a=i(84456),s=i(12902),c=s.escapeFacetValue,u=s.unescapeFacetValue},57293:(e,t,i)=>{var n=i(31853),r=i(71544),a=i(24652),s=i(45875),c=i(13591),u=i(90026),f=i(84456),h=i(12902),o=h.escapeFacetValue,m=h.unescapeFacetValue,d=i(97135);function l(e){var t={};return e.forEach((function(e,i){t[e]=i})),t}function v(e,t,i){t&&t[i]&&(e.stats=t[i])}function R(e,t,i){var a=t[0];this._rawResults=t;var f=this;Object.keys(a).forEach((function(e){f[e]=a[e]})),Object.keys(i||{}).forEach((function(e){f[e]=i[e]})),this.processingTimeMS=t.reduce((function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS}),0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map((function(){return[]})),this.facets=[];var h=e.getRefinedDisjunctiveFacets(),o=l(e.facets),R=l(e.disjunctiveFacets),F=1,g=a.facets||{};Object.keys(g).forEach((function(t){var i,n,r=g[t],s=(i=e.hierarchicalFacets,n=t,c(i,(function(e){return(e.attributes||[]).indexOf(n)>-1})));if(s){var h=s.attributes.indexOf(t),m=u(e.hierarchicalFacets,(function(e){return e.name===s.name}));f.hierarchicalFacets[m][h]={attribute:t,data:r,exhaustive:a.exhaustiveFacetsCount}}else{var d,l=-1!==e.disjunctiveFacets.indexOf(t),F=-1!==e.facets.indexOf(t);l&&(d=R[t],f.disjunctiveFacets[d]={name:t,data:r,exhaustive:a.exhaustiveFacetsCount},v(f.disjunctiveFacets[d],a.facets_stats,t)),F&&(d=o[t],f.facets[d]={name:t,data:r,exhaustive:a.exhaustiveFacetsCount},v(f.facets[d],a.facets_stats,t))}})),this.hierarchicalFacets=s(this.hierarchicalFacets),h.forEach((function(i){var s=t[F],c=s&&s.facets?s.facets:{},h=e.getHierarchicalFacetByName(i);Object.keys(c).forEach((function(t){var i,o=c[t];if(h){i=u(e.hierarchicalFacets,(function(e){return e.name===h.name}));var d=u(f.hierarchicalFacets[i],(function(e){return e.attribute===t}));if(-1===d)return;f.hierarchicalFacets[i][d].data=n({},f.hierarchicalFacets[i][d].data,o)}else{i=R[t];var l=a.facets&&a.facets[t]||{};f.disjunctiveFacets[i]={name:t,data:r({},o,l),exhaustive:s.exhaustiveFacetsCount},v(f.disjunctiveFacets[i],s.facets_stats,t),e.disjunctiveFacetsRefinements[t]&&e.disjunctiveFacetsRefinements[t].forEach((function(n){!f.disjunctiveFacets[i].data[n]&&e.disjunctiveFacetsRefinements[t].indexOf(m(n))>-1&&(f.disjunctiveFacets[i].data[n]=0)}))}})),F++})),e.getRefinedHierarchicalFacets().forEach((function(i){var n=e.getHierarchicalFacetByName(i),a=e._getHierarchicalFacetSeparator(n),s=e.getHierarchicalRefinement(i);0===s.length||s[0].split(a).length<2||t.slice(F).forEach((function(t){var i=t&&t.facets?t.facets:{};Object.keys(i).forEach((function(t){var c=i[t],h=u(e.hierarchicalFacets,(function(e){return e.name===n.name})),o=u(f.hierarchicalFacets[h],(function(e){return e.attribute===t}));if(-1!==o){var m={};if(s.length>0){var d=s[0].split(a)[0];m[d]=f.hierarchicalFacets[h][o].data[d]}f.hierarchicalFacets[h][o].data=r(m,c,f.hierarchicalFacets[h][o].data)}})),F++}))})),Object.keys(e.facetsExcludes).forEach((function(t){var i=e.facetsExcludes[t],n=o[t];f.facets[n]={name:t,data:a.facets[t],exhaustive:a.exhaustiveFacetsCount},i.forEach((function(e){f.facets[n]=f.facets[n]||{name:t},f.facets[n].data=f.facets[n].data||{},f.facets[n].data[e]=0}))})),this.hierarchicalFacets=this.hierarchicalFacets.map(d(e)),this.facets=s(this.facets),this.disjunctiveFacets=s(this.disjunctiveFacets),this._state=e}function F(e,t,i,n){if(n=n||0,Array.isArray(t))return e(t,i[n]);if(!t.data||0===t.data.length)return t;var a=t.data.map((function(t){return F(e,t,i,n+1)})),s=e(a,i[n]);return r({data:s},t)}function g(e,t){var i=c(e,(function(e){return e.name===t}));return i&&i.stats}function y(e,t,i,n,r){var a=c(r,(function(e){return e.name===i})),s=a&&a.data&&a.data[n]?a.data[n]:0,u=a&&a.exhaustive||!1;return{type:t,attributeName:i,name:n,count:s,exhaustive:u}}R.prototype.getFacetByName=function(e){function t(t){return t.name===e}return c(this.facets,t)||c(this.disjunctiveFacets,t)||c(this.hierarchicalFacets,t)},R.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],R.prototype.getFacetValues=function(e,t){var i=function(e,t){function i(e){return e.name===t}if(e._state.isConjunctiveFacet(t)){var n=c(e.facets,i);return n?Object.keys(n.data).map((function(i){var r=o(i);return{name:i,escapedValue:r,count:n.data[i],isRefined:e._state.isFacetRefined(t,r),isExcluded:e._state.isExcludeRefined(t,i)}})):[]}if(e._state.isDisjunctiveFacet(t)){var r=c(e.disjunctiveFacets,i);return r?Object.keys(r.data).map((function(i){var n=o(i);return{name:i,escapedValue:n,count:r.data[i],isRefined:e._state.isDisjunctiveFacetRefined(t,n)}})):[]}if(e._state.isHierarchicalFacet(t))return c(e.hierarchicalFacets,i)}(this,e);if(i){var n=r({},t,{sortBy:R.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),s=this;return F((function(e,t){if(n.facetOrdering){var i=function(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}(s,t);if(Boolean(i))return function(e,t){var i=[],n=[],r=(t.order||[]).reduce((function(e,t,i){return e[t]=i,e}),{});e.forEach((function(e){var t=e.path||e.name;void 0!==r[t]?i[r[t]]=e:n.push(e)})),i=i.filter((function(e){return e}));var s,c=t.sortRemainingBy;return"hidden"===c?i:(s="alpha"===c?[["path","name"],["asc","asc"]]:[["count"],["desc"]],i.concat(a(n,s[0],s[1])))}(e,i)}if(Array.isArray(n.sortBy)){var r=f(n.sortBy,R.DEFAULT_SORT);return a(e,r[0],r[1])}if("function"==typeof n.sortBy)return function(e,t){return t.sort(e)}(n.sortBy,e);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")}),i,Array.isArray(i)?[e]:s._state.getHierarchicalFacetByName(i.name).attributes)}},R.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?g(this.facets,e):this._state.isDisjunctiveFacet(e)?g(this.disjunctiveFacets,e):void 0},R.prototype.getRefinements=function(){var e=this._state,t=this,i=[];return Object.keys(e.facetsRefinements).forEach((function(n){e.facetsRefinements[n].forEach((function(e){i.push(y(0,"facet",n,e,t.facets))}))})),Object.keys(e.facetsExcludes).forEach((function(n){e.facetsExcludes[n].forEach((function(e){i.push(y(0,"exclude",n,e,t.facets))}))})),Object.keys(e.disjunctiveFacetsRefinements).forEach((function(n){e.disjunctiveFacetsRefinements[n].forEach((function(e){i.push(y(0,"disjunctive",n,e,t.disjunctiveFacets))}))})),Object.keys(e.hierarchicalFacetsRefinements).forEach((function(n){e.hierarchicalFacetsRefinements[n].forEach((function(r){i.push(function(e,t,i,n){var r=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(r),s=i.split(a),u=c(n,(function(e){return e.name===t})),f=s.reduce((function(e,t){var i=e&&c(e.data,(function(e){return e.name===t}));return void 0!==i?i:e}),u),h=f&&f.count||0,o=f&&f.exhaustive||!1,m=f&&f.path||"";return{type:"hierarchical",attributeName:t,name:m,count:h,exhaustive:o}}(e,n,r,t.hierarchicalFacets))}))})),Object.keys(e.numericRefinements).forEach((function(t){var n=e.numericRefinements[t];Object.keys(n).forEach((function(e){n[e].forEach((function(n){i.push({type:"numeric",attributeName:t,name:n,numericValue:n,operator:e})}))}))})),e.tagRefinements.forEach((function(e){i.push({type:"tag",attributeName:"_tags",name:e})})),i},e.exports=R}}]);